{"version":3,"file":"chunks/67674.04a911d1198e0bba4259.min.js","mappings":"kIAEAA,EAAEC,UAAUC,OAAMC,iBAChB,MAAMH,SAAW,8CAAkBI,QAEnCJ,EAAE,+BAA+BK,GAAG,SAAS,WACtCC,MAAMC,IAAI,aAAaC,OAS1BR,EAAES,KAAK,CACLC,IAAK,2BACLC,KAAM,OACNH,KAAM,CACJI,gBAAiBN,MAAMC,IAAI,aAAaC,OAAOK,OAEhDC,MAAK,SAAUN,GACZO,KAAKC,MAAMR,GAAMS,IACnBX,MAAMC,IAAI,aAAaW,SAASC,MAAK,GACrCnB,EAAE,kBACCoB,YAAY,SACZC,SAAS,QACTC,KAAK,OAAQ,UACbC,IAAI,UAAW,IACfC,KACC,wEAGJxB,EAAE,kBACCoB,YAAY,QACZC,SAAS,SACTC,KAAK,OAAQ,SACbC,IAAI,UAAW,IACfC,KACC,oFAGR,IAlCAxB,EAAE,kBACCoB,YAAY,QACZC,SAAS,SACTC,KAAK,OAAQ,SACbC,IAAI,UAAW,IACfC,KAAK,4DA+BZ,IAGAlB,MAAQN,EAAE,kBAAkByB,UAAU,CACpCC,SAAU,CACRhB,IAAK,iEAEPD,KAAM,CACJC,IAAK,wBACLiB,QAAS,IAEXC,UAAU,EACVC,QAAS,CACP,CAAErB,KAAM,OACR,CAAEA,KAAM,WACR,CAAEA,KAAM,eACR,CAAEA,KAAM,mBACR,CAAEA,KAAM,iBACR,CACEA,KAAM,YACNsB,OAAQ,SAAUtB,EAAMG,EAAMJ,GAC5B,OAAIA,EAAIwB,QACC,WAEFxB,EAAIyB,UAAY,UAAY,QACrC,IAGJC,WAAY,CACV,CACEC,QAAS,CAAC,GACVC,SAAS,EACTC,YAAY,MAKlBpC,EAAE,wBAAwBK,GAAG,QAAS,MAAM,WACtCL,EAAEqC,MAAMC,SAAS,YACnBtC,EAAEqC,MAAMjB,YAAY,aAEpBd,MAAMN,EAAE,eAAeoB,YAAY,YACnCpB,EAAEqC,MAAMhB,SAAS,YAErB,GACF,G","sources":["webpack://rer.newsletter/./src/rer/newsletter/browser/static/scripts/channelhistory.js"],"sourcesContent":["import './datatables';\n\n$(document).ready(async function () {\n  const $ = (await import('jquery')).default;\n\n  $('#delete-message-sent > span').on('click', function () {\n    if (!table.row('.selected').data()) {\n      // render error user deleted\n      $('.portalMessage')\n        .removeClass('info')\n        .addClass('error')\n        .attr('role', 'alert')\n        .css('display', '')\n        .html('<strong>Error</strong> Prima va selezionato un messaggio.');\n    } else {\n      $.ajax({\n        url: 'deleteMessageFromHistory',\n        type: 'post',\n        data: {\n          message_history: table.row('.selected').data().uid,\n        },\n      }).done(function (data) {\n        if (JSON.parse(data).ok) {\n          table.row('.selected').remove().draw(false);\n          $('.portalMessage')\n            .removeClass('error')\n            .addClass('info')\n            .attr('role', 'status')\n            .css('display', '')\n            .html(\n              '<strong>Info</strong> Storico del messaggio eliminato con successo.',\n            );\n        } else {\n          $('.portalMessage')\n            .removeClass('info')\n            .addClass('error')\n            .attr('role', 'alert')\n            .css('display', '')\n            .html(\n              '<strong>Error</strong> Problemi con la cancellazione dello storico del messaggio.',\n            );\n        }\n      });\n    }\n  });\n\n  // inizializzazione datatables\n  table = $('#message-table').DataTable({\n    language: {\n      url: 'https://cdn.datatables.net/plug-ins/1.10.16/i18n/Italian.json',\n    },\n    ajax: {\n      url: 'getMessageSentDetails',\n      dataSrc: '',\n    },\n    ordering: false,\n    columns: [\n      { data: 'uid' },\n      { data: 'message' },\n      { data: 'subscribers' },\n      { data: 'send_date_start' },\n      { data: 'send_date_end' },\n      {\n        data: 'completed',\n        render: function (data, type, row) {\n          if (row.running) {\n            return 'In corso';\n          }\n          return row.completed ? 'Inviata' : 'Errore';\n        },\n      },\n    ],\n    columnDefs: [\n      {\n        targets: [0],\n        visible: false,\n        searchable: false,\n      },\n    ],\n  });\n\n  $('#message-table tbody').on('click', 'tr', function () {\n    if ($(this).hasClass('selected')) {\n      $(this).removeClass('selected');\n    } else {\n      table.$('tr.selected').removeClass('selected');\n      $(this).addClass('selected');\n    }\n  });\n});\n"],"names":["$","document","ready","async","default","on","table","row","data","ajax","url","type","message_history","uid","done","JSON","parse","ok","remove","draw","removeClass","addClass","attr","css","html","DataTable","language","dataSrc","ordering","columns","render","running","completed","columnDefs","targets","visible","searchable","this","hasClass"],"sourceRoot":""}